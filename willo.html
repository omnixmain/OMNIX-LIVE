<!DOCTYPE html>
<html lang="en">
 <head>
  <meta charset="utf-8"/>
  <meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" name="viewport"/>
  <script crossorigin="anonymous" src="https://cdnjs.cloudflare.com/ajax/libs/shaka-player/4.7.11/shaka-player.ui.min.js">
  </script>
  <link crossorigin="anonymous" href="https://cdnjs.cloudflare.com/ajax/libs/shaka-player/4.7.11/controls.min.css" rel="stylesheet"/>
  <style>
   html, body {
  width: 100%;
  height: 100%;
  margin: 0;
  background: #000;
  overflow: hidden;
}

.player-wrapper {
  width: 100vw;
  height: 100vh;
}

[data-shaka-player-container] {
  width: 100%;
  height: 100%;
}

video {
  width: 100%;
  height: 100%;
  object-fit: contain;
  background: #000;
}

.shaka-spinner-container {
  display: none !important;
}
  </style>
 </head>
 <body>
  <div class="player-wrapper">
   <div data-shaka-player-container="">
    <video autoplay="" data-shaka-player="" id="video" muted="" playsinline="">
    </video>
   </div>
  </div>
  <script>
   async function initPlayer() {
  const video = document.getElementById("video");
  const container = video.parentElement;

  /* ðŸ”¥ AUTOPLAY GUARANTEE */
  video.muted = true;   // MUST for no-click autoplay
  video.volume = 0;

  const player = new shaka.Player(video);

  player.configure({
    streaming: {
      rebufferingGoal: 1,
      bufferingGoal: 3,
      bufferBehind: 5,
      lowLatencyMode: true,
      autoLowLatencyMode: true,
      jumpLargeGaps: true
    },
    manifest: {
      dash: {
        ignoreDrmInfo: true,
        ignoreMinBufferTime: true
      }
    },
    abr: {
      enabled: true,
      defaultBandwidthEstimate: 2000000
    },
    drm: {
      clearKeys: {
        "e231ebe868ebc73de11f1e583438881e760": "72799c5ead4b98c666666e5e07acb6878ed"
      }
    }
  });

  const ui = new shaka.ui.Overlay(player, container, video);
  ui.configure({
    controlPanelElements: [
      "play_pause",
      "time_and_duration",
      "mute",
      "volume",
      "spacer",
      "quality",
      "picture_in_picture",
      "fullscreen"
    ]
  });

  try {
    await player.load(
      "https://a205aivottlinear-a.akamaihd.net/IAD/lhr-nitro/live/clients/dash/enc/bah71q72xq/out/v1/adb7cc42e7844fb5343453af7e82b4f1cfa358/cenc.mpd"
    );

    /* ðŸš€ HARD FORCE PLAY */
    video.play().catch(()=>{});
    setTimeout(() => video.play().catch(()=>{}), 500);
    setTimeout(() => video.play().catch(()=>{}), 1500);

  } catch (e) {
    console.error("Stream load error:", e);
  }
}

document.addEventListener("DOMContentLoaded", initPlayer);
  </script>
 </body>
</html>
